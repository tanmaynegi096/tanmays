import requests
from bs4 import BeautifulSoup

def get_price(url):
    """
    Scrapes the price from the given URL.
    """
    # We need headers so Amazon/Flipkart thinks we are a real browser, not a bot
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
    }

    try:
        page = requests.get(url, headers=headers)
        soup = BeautifulSoup(page.content, 'html.parser')

        # NOTE: This selector finds the whole number part of the price on Amazon
        # If testing on other sites, this 'class' name might need changing.
        price_element = soup.find(class_="a-price-whole") 
        
        if price_element:
            price_text = price_element.get_text()
            # Remove commas (e.g., "1,299" -> "1299") and convert to float
            clean_price = price_text.replace(",", "").replace(".", "")
            return float(clean_price)
        else:
            return None

    except Exception as e:
        print(f"Could not fetch price. Error: {e}")
        return None
